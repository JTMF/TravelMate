<!DOCTYPE html>
<html>
<head>
    <title>Chat Test</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        button { padding: 10px 20px; background: #B40000; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .test { background: #f0f0f0; padding: 15px; margin: 10px 0; border-radius: 4px; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>üîç Modal Popup Test</h1>
    
    <div class="test">
        <h3>Test 1: Check HTML Elements</h3>
        <p id="test1">Checking...</p>
    </div>

    <div class="test">
        <h3>Test 2: Check Function</h3>
        <p id="test2">Checking...</p>
    </div>

    <div class="test">
        <h3>Test 3: Try Opening Modal</h3>
        <button onclick="testToggle()">Click to Open Modal</button>
        <p id="test3"></p>
    </div>

    <!-- Floating Chat Icon Button -->
    <button id="chatIconBtn" style="position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; border-radius: 50%; font-size: 28px; z-index: 999;" onclick="toggleChatWidget()" title="Open AI Chat Assistant">üí¨</button>

    <!-- Chat Modal -->
    <div id="chatModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 1000; align-items: center; justify-content: center;">
        <div style="background: white; width: 90%; height: 90vh; max-width: 600px; border-radius: 12px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3); position: relative; overflow: hidden;">
            <button style="position: absolute; top: 10px; right: 10px; background: #f0f0f0; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-size: 24px; z-index: 1001;" onclick="toggleChatWidget()">‚úï</button>
            <iframe src="https://cdn.botpress.cloud/webchat/v3.5/shareable.html?configUrl=https://files.bpcontent.cloud/2026/01/12/04/20260112043815-JSGWJ2YJ.json" 
                    style="width: 100%; height: 100%; border: none; border-radius: 8px;"></iframe>
        </div>
    </div>

    <script>
        // Test 1: Check HTML elements
        const modal = document.getElementById('chatModal');
        const btn = document.getElementById('chatIconBtn');
        document.getElementById('test1').innerHTML = 
            (modal ? '<span class="success">‚úì Modal found</span>' : '<span class="error">‚úó Modal not found</span>') + ' | ' +
            (btn ? '<span class="success">‚úì Button found</span>' : '<span class="error">‚úó Button not found</span>');

        // Test 2: Check function
        document.getElementById('test2').innerHTML = 
            (typeof toggleChatWidget === 'function' ? '<span class="success">‚úì toggleChatWidget exists</span>' : '<span class="error">‚úó Function not found</span>');

        // Test 3: Toggle function
        function testToggle() {
            console.log('Modal classes before:', document.getElementById('chatModal').className);
            toggleChatWidget();
            console.log('Modal classes after:', document.getElementById('chatModal').className);
            document.getElementById('test3').innerHTML = '<span class="success">‚úì Toggle called (check modal above)</span>';
        }

        // Global toggle function
        window.toggleChatWidget = function() {
            const modal = document.getElementById('chatModal');
            if (modal) {
                const isOpen = modal.style.display === 'flex';
                modal.style.display = isOpen ? 'none' : 'flex';
            }
        };
    </script>
</body>
</html>
