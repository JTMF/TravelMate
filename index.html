<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TravelMate - Your Singapore Guide for Exchange Students</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Floating Chat Icon Button -->
    <button id="chatIconBtn" class="chat-icon-btn" onclick="toggleChatWidget()" title="Open AI Chat Assistant">
        <span class="chat-icon">üí¨</span>
    </button>

    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <h1>‚úàÔ∏è TravelMate</h1>
            </div>
            <ul class="nav-menu">
                <li><a href="#home" class="nav-link active">Home</a></li>
                <li><a href="#transport" class="nav-link">Transport</a></li>
                <li><a href="#food" class="nav-link">Food & Dining</a></li>
                <li><a href="#leisure" class="nav-link">Leisure</a></li>
                <li><a href="#daily-life" class="nav-link">Daily Life</a></li>
                <li><a href="#chat" class="nav-link chatbot-trigger">AI Chat</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <h1>Welcome to Singapore, Exchange Student!</h1>
            <p>Your personalized guide to transport, food, leisure, and daily life</p>
            <button class="cta-button" onclick="document.getElementById('leisure').scrollIntoView({behavior: 'smooth'})">
                Explore Leisure & Entertainment
            </button>
        </div>
    </section>

    <!-- Leisure & Entertainment Section (Main Focus) -->
    <section id="leisure" class="leisure-section">
        <div class="container">
            <h2>üéÆ Leisure & Entertainment</h2>
            <p class="section-intro">Discover affordable, accessible activities perfect for student life in Singapore.</p>

            <!-- Filter Buttons -->
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="parks">Parks & Nature</button>
                <button class="filter-btn" data-filter="shopping">Shopping Malls</button>
                <button class="filter-btn" data-filter="entertainment">Entertainment</button>
                <button class="filter-btn" data-filter="free-budget">Free & Budget</button>
            </div>

            <!-- Leisure Cards Grid -->
            <div class="leisure-grid" id="leisureGrid">
                <!-- Cards populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Attraction Detail Modal -->
    <div id="attractionModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalBody">
                <!-- Details populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Transportation Section (Placeholder) -->
    <section id="transport" class="section">
        <div class="container">
            <h2>üöÜ Getting Around Singapore</h2>
            <p>Comprehensive MRT, bus, and transport guides for students.</p>
            <p style="color: #999; font-size: 14px;">Coming soon...</p>
        </div>
    </section>

    <!-- Food & Dining Section (Placeholder) -->
    <section id="food" class="section">
        <div class="container">
            <h2>üçú Food & Dining</h2>
            <p>Budget-friendly food recommendations and hawker guides.</p>
            <p style="color: #999; font-size: 14px;">Coming soon...</p>
        </div>
    </section>

    <!-- Daily Life Section (Placeholder) -->
    <section id="daily-life" class="section">
        <div class="container">
            <h2>üè† Daily Life Essentials</h2>
            <p>Housing, SIM cards, banking, and essential services.</p>
            <p style="color: #999; font-size: 14px;">Coming soon...</p>
        </div>
    </section>

    <!-- Chat Section with Botpress Integration -->
    <section id="chat" class="chat-section">
        <div class="container">
            <h2>üí¨ AI Chat Assistant</h2>
            <p>Get instant personalized recommendations for your needs.</p>
            <div id="botpress-container" class="botpress-chat-widget"></div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 TravelMate - Helping Foreign Exchange Students Thrive in Singapore</p>
            <p>Module: C240 FA | Republic Polytechnic</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/botpress-config.js"></script>
    <script src="js/data.js"></script>
    <script src="js/leisure.js"></script>
    <script src="js/main.js"></script>
    
    <!-- Botpress Chatbot - Standard Integration -->
    <script>
        // Toggle chat widget visibility
        function toggleChatWidget() {
            if (window.botpressWebChat) {
                window.botpressWebChat.sendEvent({
                    type: 'show'
                });
            }
        }
        
        (function() {
            var d = document;
            var w = window;
            var config = window.botpressConfig || {};
            
            function loadBotpress() {
                if (w.botpressWebChat) {
                    w.botpressWebChat.init({
                        configUrl: config.configUrl,
                        hideWidget: config.hideWidget
                    });
                }
            }
            
            // Load Botpress script
            var s = d.createElement('script');
            s.src = config.sdkUrl;
            s.onload = loadBotpress;
            s.onerror = function() {
                console.error('Failed to load Botpress SDK');
                // Retry after 2 seconds
                setTimeout(function() {
                    var retry = d.createElement('script');
                    retry.src = config.sdkUrl;
                    retry.onload = loadBotpress;
                    d.head.appendChild(retry);
                }, 2000);
            };
            d.head.appendChild(s);
            
            // Fallback initialization
            setTimeout(function() {
                if (w.botpressWebChat && !w.botpressWebChat.isInitialized) {
                    loadBotpress();
                }
            }, 3000);
        })();
    </script>
</body>
</html>
